<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Angel One Dashboard - SmartBot</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark-theme">
  <header>
    <h1>ðŸ“Š Angel One - India Market Dashboard</h1>
    <button onclick="logout()">Logout</button>
  </header>

  <main>
    <section>
      <h2>Place Trade (Manual)</h2>
      <input type="text" id="symbol" placeholder="RELIANCE">
      <select id="action">
        <option value="BUY">BUY</option>
        <option value="SELL">SELL</option>
      </select>
      <input type="number" id="quantity" placeholder="Quantity">
      <button onclick="placeTrade()">Place Order</button>
    </section>

    <section>
      <h2>Live Logs</h2>
      <div id="logs"></div>
    </section>
  </main>

  <script>
    function placeTrade() {
      const symbol = document.getElementById('symbol').value;
      const action = document.getElementById('action').value;
      const quantity = document.getElementById('quantity').value;

      fetch('/angel-trade', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          symbol,
          action,
          quantity
        })
      }).then(res => res.json()).then(data => {
        const logDiv = document.getElementById('logs');
        logDiv.innerHTML += `<p>${new Date().toLocaleTimeString()}: ${data.status} - ${data.message || data.orderId}</p>`;
      });
    }

    function logout() {
      localStorage.clear();
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
